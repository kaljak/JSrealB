function Tokn(e){this.mot=e,this.capitalized=!1;var t=e.charAt(0);if(t==t.toUpperCase()&&(t=t.toLowerCase(),this.mot=t+this.mot.substring(1),this.capitalized=!0),this.elidable=elidables.indexOf(this.mot)>=0,this.voyelleOuHmuet=!1,voyelles.indexOf(t)>=0)return void(this.voyelleOuHmuet=!0);if("h"===t){var r=JSrealB.Config.get("lexicon")[this.mot];if(r){for(cat in r)if(!r[cat].h){this.voyelleOuHmuet=!0;break}}else this.voyelleOuHmuet=!0}}function showTokens(e){return"["+e.map(function(e){return e.toString()}).join(",")+"]"}function removeLastLetter(e){return e.substring(0,e.length-1)}function remplaceToken(e,t,r){e[t].mot=r,e.splice(t+1,1)}function contracter(e){for(var t=0;t<e.length-1;t++){var r=e[t].mot,n=e[t+1].mot;"à"==r?"le"==n?remplaceToken(e,t,"au"):"les"==n&&remplaceTokens(e,t,"aux"):"de"==r?"le"==n?remplaceToken(e,t,"du"):"les"==n?remplaceToken(e,t,"des"):"des"==n?remplaceToken(e,t,"de"):"autres"==n&&remplaceToken(e,t,"d'autres"):"des"==r&&"autres"==n&&remplaceToken(e,t,"d'autres")}return e}function eliderMots(e,t){if(0==t.length)return contracter(e);var r="<"!==e[e.length-1].mot.charAt(0)?e.length-1:e.length-2,n=e[r];return n.elidable&&t[0].voyelleOuHmuet?["ma","ta","sa"].indexOf(n.mot)>=0?(n.mot=n.mot.charAt(0)+"on",e.push(t.shift())):(t[0].mot=removeLastLetter(n.mot)+"'"+t[0],t[0].capitalized=n.capitalized,e.splice(r,1),e.push(t.shift())):e.push(t.shift()),eliderMots(e,t)}function extend(e,t){var r=t.prototype;t.prototype=Object.create(e.prototype);for(var n in r)t.prototype[n]=r[n];t.prototype.constructor=t,Object.defineProperty(t.prototype,"constructor",{enumerable:!1,value:t})}function loadLanguage(e,t,r){JSrealLoader({language:t,lexiconUrl:e+"lex-"+t+".json",ruleUrl:e+"rule-"+t+".json",featureUrl:e+"feature.json"},r,function(e){alert(e)})}var JSrealE=function(e,t,r){this.unit=null,this.realization=null,this.category=t,this.fct=null,this.transformation=r||null,this.constructor=t,this.prop={},this.defaultProp={},this.childrenProp={},this.defaultCtx={},this.ctx={},this.parent=null,this.elements=[],this.constituents={head:void 0,modifier:[],subordinate:[],complement:[]};var n=!0;this.transformation===JSrealE.ruleType.date?this.unit=e:this.transformation===JSrealE.ruleType.number?(n=!1,this.unit=e):isString(e)?(this.unit=e,this.initUnitProperty()):(Array.isArray(e)||isObject(e))&&(this.elements=e),this.initContext(n)};JSrealE.language={english:"en",french:"fr"},JSrealE.ruleType={conjugation:1,declension:2,regular:3,date:4,number:5,none:6},JSrealE.grammaticalFunction={modifier:1,head:2,subordinate:3,complement:4},JSrealE.prototype.initUnitProperty=function(){if(this.transformation!==JSrealE.ruleType.none){this.defaultProp[JSrealB.Config.get("feature.number.alias")]=JSrealB.Config.get("feature.number.singular"),this.defaultProp[JSrealB.Config.get("feature.owner.alias")]=JSrealB.Config.get("feature.owner.singular"),this.category!==JSrealB.Config.get("feature.category.word.verb")&&this.category!==JSrealB.Config.get("feature.category.phrase.verb")||(this.defaultProp[JSrealB.Config.get("feature.tense.alias")]=JSrealB.Config.get("feature.tense.base"));var e=JSrealB.Module.Common.getWordFeature(this.unit,this.category,!0),t=null!==e?e[JSrealB.Config.get("feature.gender.alias")]:void 0;void 0!==t?this.defaultProp[JSrealB.Config.get("feature.gender.alias")]=t:this.defaultProp[JSrealB.Config.get("feature.gender.alias")]=JSrealB.Config.get("feature.gender.masculine");var r=null!==e?e[JSrealB.Config.get("feature.person.alias")]:void 0;void 0!==r?this.defaultProp[JSrealB.Config.get("feature.person.alias")]=r:this.defaultProp[JSrealB.Config.get("feature.person.alias")]=JSrealB.Config.get("feature.person.p3")}},JSrealE.prototype.initContext=function(e){this.ctx[JSrealB.Config.get("feature.display_option.alias")]={},this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")]={},this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.natural")]=e,this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.relative_time")]=!1,this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.raw")]=!1,this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.max_precision")]=2,this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.determiner")]=!0},JSrealE.prototype.getProp=function(e){var t=this.prop[e];return void 0===t?this.getDefaultProp(e):t},JSrealE.prototype.getDefaultProp=function(e){var t=this.defaultProp[e];return void 0===t?null:t},JSrealE.prototype.getChildrenProp=function(e){var t=this.childrenProp[e];return void 0===t?null:t},JSrealE.prototype.setProp=function(e,t){return void 0===this.prop[e]&&(this.prop[e]=t),this},JSrealE.prototype.setDefaultProp=function(e,t){return this.defaultProp[e]=t,this},JSrealE.prototype.setChildrenProp=function(e,t){return this.childrenProp[e]=t,this},JSrealE.prototype.getCtx=function(e){var t=fetchFromObject(this.ctx,e);return void 0===t?this.getDefaultCtx(e):t},JSrealE.prototype.getDefaultCtx=function(e){var t=fetchFromObject(this.defaultCtx,e);return void 0===t?null:t},JSrealE.prototype.setCtx=function(e,t){return void 0===fetchFromObject(this.ctx,e)&&fetchFromObject(this.ctx,e,t),this},JSrealE.prototype.addConstituent=function(e,t){switch(t){case JSrealE.grammaticalFunction.modifier:e.fct=JSrealE.grammaticalFunction.modifier,this.constituents.modifier.push(e);break;case JSrealE.grammaticalFunction.head:if(void 0===this.constituents.head||null===this.constituents.head){e.fct=JSrealE.grammaticalFunction.head,this.constituents.head=e;break}case JSrealE.grammaticalFunction.subordinate:e.fct=JSrealE.grammaticalFunction.subordinate,this.constituents.subordinate.push(e);break;case JSrealE.grammaticalFunction.complement:e.fct=JSrealE.grammaticalFunction.complement,this.constituents.complement.push(e)}},JSrealE.prototype.topDownFeaturePropagation=function(e,t,r){if(void 0!==t&&void 0!==r&&t.length!==r.length)return!1;var n,a,o=void 0===t?Object.keys(this.prop).concat(Object.keys(this.defaultProp)):t;for(n=0,a=o.length;n<a;n++)e.setProp(o[n],void 0===r?this.getProp(o[n]):r[n]);return!0},JSrealE.prototype.siblingFeaturePropagation=function(e,t,r){if(void 0!==t&&void 0!==r&&t.length!==r.length)return!1;var n,a,o=void 0===t?Object.keys(this.prop).concat(Object.keys(this.defaultProp)).concat(Object.keys(this.childrenProp)):t;for(n=0,a=o.length;n<a;n++)void 0!==r?e.setDefaultProp(o[n],r[n]):null!==this.getChildrenProp(o[n])?e.setDefaultProp(o[n],this.getChildrenProp(o[n])):e.setDefaultProp(o[n],this.getProp(o[n]));return!0},JSrealE.prototype.bottomUpFeaturePropagation=function(e,t,r){if(void 0!==t&&void 0!==r&&t.length!==r.length)return!1;var n,a,o=void 0===t?Object.keys(this.prop).concat(Object.keys(this.defaultProp)).concat(Object.keys(this.childrenProp)):t;for(n=0,a=o.length;n<a;n++)void 0!==r?e.setChildrenProp(o[n],r[n]):null!==this.getChildrenProp(o[n])?e.setChildrenProp(o[n],this.getChildrenProp(o[n])):e.setChildrenProp(o[n],this.getProp(o[n]));return!0},JSrealE.prototype.t=function(e){if(!contains(JSrealB.Config.get("feature.tense"),e))throw JSrealB.Exception.invalidInput(e,"tense");return this.setProp(JSrealB.Config.get("feature.tense.alias"),e)},JSrealE.prototype.pe=function(e){if(!isNumeric(e)||e<1||e>3)throw JSrealB.Exception.invalidInput(e,"person");return this.setProp(JSrealB.Config.get("feature.person.alias"),isString(e)?intVal(e):e)},JSrealE.prototype.g=function(e){if(!contains(JSrealB.Config.get("feature.gender"),e))throw JSrealB.Exception.invalidInput(e,"gender");return this.setProp(JSrealB.Config.get("feature.gender.alias"),e)},JSrealE.prototype.n=function(e){if(!contains(JSrealB.Config.get("feature.number"),e))throw JSrealB.Exception.invalidInput(e,"number");return this.setProp(JSrealB.Config.get("feature.number.alias"),e)},JSrealE.prototype.f=function(e){if(!contains(JSrealB.Config.get("feature.form"),e))throw JSrealB.Exception.invalidInput(e,"form");return this.setProp(JSrealB.Config.get("feature.form.alias"),e)},JSrealE.prototype.ow=function(e){if(!contains(JSrealB.Config.get("feature.owner"),e))throw JSrealB.Exception.invalidInput(e,"owner");return this.setProp(JSrealB.Config.get("feature.owner.alias"),e)},JSrealE.prototype.cap=function(e){if(!isBoolean(e)&&void 0!==e)throw JSrealB.Exception.invalidInput(e,"ucf");return this.setCtx(JSrealB.Config.get("feature.typography.ucfist"),void 0===e||e===!0)},JSrealE.prototype.b=function(e){return this.setCtx(JSrealB.Config.get("feature.typography.before"),e)},JSrealE.prototype.a=function(e){return this.setCtx(JSrealB.Config.get("feature.typography.after"),e)},JSrealE.prototype.en=function(e){return this.setCtx(JSrealB.Config.get("feature.typography.surround"),e)},JSrealE.prototype.c=function(e){return this.setCtx(JSrealB.Config.get("feature.category.word.conjunction"),e)},JSrealE.prototype.nat=function(e){if(!isBoolean(e)&&void 0!==e)throw JSrealB.Exception.invalidInput(e,"natural");return this.setCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.natural"),void 0===e||e===!0)},JSrealE.prototype.dOpt=function(e){if(void 0!==e&&isObject(e)){for(var t=Object.keys(e),r=0,n=t.length;r<n;r++)this.setCtx(JSrealB.Config.get("feature.display_option.alias")+"."+t[r],e[t[r]]);return this}return null},JSrealE.prototype.tag=function(e,t){return this.setCtx(JSrealB.Config.get("feature.html.element"),e),this.setCtx(JSrealB.Config.get("feature.html.attribute"),t),this},JSrealE.prototype.sortWord=function(){},JSrealE.prototype.phraseToElementPropagation=function(e){return e.fct===JSrealE.grammaticalFunction.modifier?this.topDownFeaturePropagation(e):e.fct===JSrealE.grammaticalFunction.head?this.topDownFeaturePropagation(e):e.fct===JSrealE.grammaticalFunction.subordinate&&null===this.constituents.head&&this.topDownFeaturePropagation(e),this},JSrealE.prototype.elementToElementPropagation=function(e){if(e.fct===JSrealE.grammaticalFunction.modifier)null!==this.constituents.head&&e.siblingFeaturePropagation(this.constituents.head);else if(e.fct===JSrealE.grammaticalFunction.head)for(var t=0,r=this.constituents.subordinate.length;t<r;t++)e.siblingFeaturePropagation(this.constituents.subordinate[t])},JSrealE.prototype.elementToPhrasePropagation=function(e){e.fct===JSrealE.grammaticalFunction.head&&e.bottomUpFeaturePropagation(this)},JSrealE.prototype.toString=function(){return this.real()},JSrealE.prototype.real=function(){if(this.elements.length>0){if(this.sortWord(),void 0!==this.constituents.head){var e=this.createRealizationList();return this.realizeGroup(e),this.realization=this.printElements(),this.typography(this.html(this.phonetic(this.realization)))}throw JSrealB.Exception.headWordNotFound(this.category)}var t=this.realizeTerminalElement();return this.typography(this.html(this.phonetic(t)))},JSrealE.prototype.createRealizationList=function(){var e=[];return void 0!==this.constituents.modifier&&this.constituents.modifier.length>0&&(e=e.concat(this.constituents.modifier)),void 0!==this.constituents.head&&null!==this.constituents.head&&e.push(this.constituents.head),void 0!==this.constituents.subordinate&&this.constituents.subordinate.length>0&&(e=e.concat(this.constituents.subordinate)),void 0!==this.constituents.complement&&this.constituents.complement.length>0&&(e=e.concat(this.constituents.complement)),e},JSrealE.prototype.realizeGroup=function(e){var t,r,n=null;for(t=0,r=e.length;t<r;t++)n=e[t],n.parent=this.category,this.phraseToElementPropagation(n),n.realization=n instanceof JSrealE?n.real():"",this.elementToElementPropagation(n),this.elementToPhrasePropagation(n)},JSrealE.prototype.printElements=function(){var e=this.elements,t=" ",r=" ",n=this.getCtx(JSrealB.Config.get("feature.category.word.conjunction"));if(this.category===JSrealB.Config.get("feature.category.phrase.coordinated")&&null!==n){JSrealB.Module.Punctuation.isValid(n)?(t=JSrealB.Module.Punctuation.after("",n),r=t):(t=", ",r=" "+n+" ");for(var a=[],o=0,i=0,l=e.length;o<l;o++)e[o].category!==JSrealB.Config.get("feature.category.word.conjunction")&&(a[i++]=e[o]);e=a}var u=this.printEachElement(e,t,r),s=!1,g=!1;return null===this.parent&&this.category===JSrealB.Config.get("feature.category.phrase.sentence")&&(s=null===this.getCtx(JSrealB.Config.get("feature.typography.surround")),g=null===this.getCtx(JSrealB.Config.get("feature.typography.ucfist"))),u=phraseFormatting(u,g,s)},JSrealE.prototype.printEachElement=function(e,t,r){var n,a,o="",i="",l=null;for(n=0,a=e.length;n<a;n++)l=e[n],i=n===a-1?"":n===a-2?r:t,l instanceof JSrealE?null!==l.realization&&void 0!==l.realization?o+=l.realization+i:null!==l.unit&&void 0!==l.unit?o+="[["+l.unit+"]]"+i:JSrealB.Logger.alert("Undefined unit and realization attributes of element : "+JSON.stringify(l)):isString(l)&&(o+=l+i);return o},JSrealE.prototype.realizeTerminalElement=function(){return 0===this.elements.length?this.transformation===JSrealE.ruleType.declension?this.realizeDeclension():this.transformation===JSrealE.ruleType.conjugation?this.realizeConjugation():this.transformation===JSrealE.ruleType.regular?this.realizeRegularTransformation():this.transformation===JSrealE.ruleType.none?this.unit:this.transformation===JSrealE.ruleType.date?this.realizeDate():this.transformation===JSrealE.ruleType.number?this.realizeNumber():"[["+this.unit+"]]":null},JSrealE.prototype.realizeConjugation=function(){var e=this.getProp(JSrealB.Config.get("feature.tense.alias")),t=this.getProp(JSrealB.Config.get("feature.person.alias")),r=this.getProp(JSrealB.Config.get("feature.number.alias"));return r===JSrealB.Config.get("feature.number.plural")&&(t+=3),JSrealB.Module.Conjugation.conjugate(this.unit,e,t)},JSrealE.prototype.realizeDeclension=function(){var e={};return e[JSrealB.Config.get("feature.gender.alias")]=this.getProp(JSrealB.Config.get("feature.gender.alias")),e[JSrealB.Config.get("feature.number.alias")]=this.getProp(JSrealB.Config.get("feature.number.alias")),e[JSrealB.Config.get("feature.form.alias")]=this.getProp(JSrealB.Config.get("feature.form.alias")),e[JSrealB.Config.get("feature.person.alias")]=this.getProp(JSrealB.Config.get("feature.person.alias")),e[JSrealB.Config.get("feature.owner.alias")]=this.getProp(JSrealB.Config.get("feature.owner.alias")),JSrealB.Module.Declension.decline(this.unit,this.category,e)},JSrealE.prototype.realizeRegularTransformation=function(){return JSrealB.Module.RegularRule.apply(this.unit,this.category)},JSrealE.prototype.realizeDate=function(){var e;if(this.unit instanceof Date)e=this.unit;else{if("string"==typeof this.unit&&this.unit.length>0&&"Invalid Date"===new Date(this.unit).toString())throw JSrealB.Exception.wrongDate(this.unit);e="string"==typeof this.unit?new Date(this.unit):new Date}return this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.relative_time"))?JSrealB.Module.Date.toRelativeTime(e,this.getCtx(JSrealB.Config.get("feature.display_option.alias"))):this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.natural"))?JSrealB.Module.Date.toWord(e,this.getCtx(JSrealB.Config.get("feature.display_option.alias"))):JSrealB.Module.Date.formatter(e,this.getCtx(JSrealB.Config.get("feature.display_option.alias")))},JSrealE.prototype.realizeNumber=function(){var e=this,t=this.unit,r=function(t){e.setDefaultProp(JSrealB.Config.get("feature.number.alias"),t)};return this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.raw"))?t.toString():this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.natural"))?JSrealB.Module.Number.toWord(t,this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.max_precision")),r).toString():JSrealB.Module.Number.formatter(t,this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.max_precision")),r).toString()},JSrealE.prototype.typography=function(e){var t=e;this.getCtx(JSrealB.Config.get("feature.typography.ucfist"))===!0&&(t=t.charAt(0).toUpperCase()+t.slice(1));var r=this.getCtx(JSrealB.Config.get("feature.typography.before"));null!==r&&(t=JSrealB.Module.Punctuation.before(t,r));var n=this.getCtx(JSrealB.Config.get("feature.typography.after"));null!==n&&(t=JSrealB.Module.Punctuation.after(t,n));var a=this.getCtx(JSrealB.Config.get("feature.typography.surround"));return null!==a&&(t=JSrealB.Module.Punctuation.surround(t,a)),trim(t)},JSrealE.prototype.html=function(e){var t=e,r=this.getCtx(JSrealB.Config.get("feature.html.element")),n=this.getCtx(JSrealB.Config.get("feature.html.attribute"));if(null!==r){var a="";if(null!==n)for(var o=Object.keys(n),i=o.length,l=0;l<i;l++)a+=" "+o[l]+'="'+n[o[l]]+'"';t="<"+r+a+">"+t+"</"+r+">"}return t},JSrealE.prototype.phonetic=function(e){var t=e;if("fr"==JSrealB.Config.get("language")){for(var r=/\s*(<[^>]*>)|\s+/gi,n=t.split(r),a=0,o=n.length;a<o;a++)void 0===n[a]&&n.splice(a,1);var i=n.length;if(i>=2){var l=n.map(function(e){return new Tokn(e)});l=eliderMots([l.shift()],l),t="";for(var u=0,s=l.length;u<s;u++)t+=l[u]+("<"===l[u].mot.charAt(0)||u+1<s&&"</"===l[u+1].mot.slice(0,2)||u+1>=s?"":" ")}}return t};var phraseFormatting=function(e,t,r){var n=e.replace(/\s{2,}/g," ");if(t){var a=stripLeftHtml(n);n=("<"===n.charAt(0)?n.slice(0,n.indexOf(a)):"")+a.charAt(0).toUpperCase()+a.slice(1)}return r&&(n=JSrealB.Module.Punctuation.after(n,".")),n=trim(n)},voyellesAccentuees="àäéèêëïîöôùû",voyelles="aeiou"+voyellesAccentuees,elidables=["la","ma","ta","sa","le","me","te","se","ce","de","ne","je","si","qui","que","jusque","lorsque","puisque","quoique"];Tokn.prototype.toString=function(){return this.capitalized?this.mot.charAt(0).toUpperCase()+this.mot.substring(1):this.mot};var N=function(e){return new JSrealE(e,JSrealB.Config.get("feature.category.word.noun"),JSrealE.ruleType.declension)},A=function(e){return new JSrealE(e,JSrealB.Config.get("feature.category.word.adjective"),JSrealE.ruleType.declension)},Pro=function(e){return new JSrealE(e,JSrealB.Config.get("feature.category.word.pronoun"),JSrealE.ruleType.declension)},D=function(e){return new JSrealE(e,JSrealB.Config.get("feature.category.word.determiner"),JSrealE.ruleType.declension)},V=function(e){return new JSrealE(e,JSrealB.Config.get("feature.category.word.verb"),JSrealE.ruleType.conjugation)},Adv=function(e){return JSrealB.Config.get("language")===JSrealE.language.english?new JSrealE(e,JSrealB.Config.get("feature.category.word.adverb"),JSrealE.ruleType.declension):new JSrealE(e,JSrealB.Config.get("feature.category.word.adverb"),JSrealE.ruleType.regular)},P=function(e){return new JSrealE(e,JSrealB.Config.get("feature.category.word.preposition"),JSrealE.ruleType.regular)},C=function(e){return new JSrealE(e,JSrealB.Config.get("feature.category.word.conjunction"),JSrealE.ruleType.none)},S=function(e){return this instanceof S?void JSrealE.call(this,e,JSrealB.Config.get("feature.category.phrase.sentence")):new S(arguments)};extend(JSrealE,S),S.prototype.sortWord=function(){this.constituents.head=null;for(var e,t=0,r=this.elements.length;t<r;t++)switch(e=this.elements[t],e.category){case JSrealB.Config.get("feature.category.phrase.verb"):this.addConstituent(e,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.phrase.coordinated"):if(null===this.constituents.head){this.addConstituent(e,JSrealE.grammaticalFunction.modifier);break}case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.phrase.adverb"):this.addConstituent(e,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(e,JSrealE.grammaticalFunction.complement)}return this};var CP=function(e){return this instanceof CP?void JSrealE.call(this,e,JSrealB.Config.get("feature.category.phrase.coordinated")):new CP(arguments)};extend(JSrealE,CP),CP.prototype.sortWord=function(){this.constituents.head=null;for(var e,t=0,r=this.elements.length;t<r;t++)switch(e=this.elements[t],e.category){case JSrealB.Config.get("feature.category.word.conjunction"):this.setCtx(JSrealB.Config.get("feature.category.word.conjunction"),e.unit);break;case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.word.noun"):case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.word.adjective"):this.addConstituent(e,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(e,JSrealE.grammaticalFunction.complement)}return this},CP.prototype.elementToPhrasePropagation=function(e){var t=this.getChildrenProp(JSrealB.Config.get("feature.person.alias")),r=e.elements.length>0?e.getChildrenProp(JSrealB.Config.get("feature.person.alias")):e.getProp(JSrealB.Config.get("feature.person.alias"));null===t?e.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.person.alias")]):t===JSrealB.Config.get("feature.person.p1")||r===JSrealB.Config.get("feature.person.p1")?e.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.person.alias")],[JSrealB.Config.get("feature.person.p1")]):t===JSrealB.Config.get("feature.person.p2")||r===JSrealB.Config.get("feature.person.p2")?e.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.person.alias")],[JSrealB.Config.get("feature.person.p2")]):e.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.person.alias")],[JSrealB.Config.get("feature.person.p3")]),this.elements.length<=2?e.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.number.alias")],[JSrealB.Config.get("feature.number.singular")]):e.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.number.alias")],[JSrealB.Config.get("feature.number.plural")]);var n=this.getChildrenProp(JSrealB.Config.get("feature.gender.alias")),a=e.elements.length>0?e.getChildrenProp(JSrealB.Config.get("feature.gender.alias")):e.getProp(JSrealB.Config.get("feature.gender.alias"));return null===n?e.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.gender.alias")]):n!==a&&e.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.gender.alias")],[JSrealB.Config.get("feature.gender.masculine")]),this};var VP=function(e){return this instanceof VP?void JSrealE.call(this,e,JSrealB.Config.get("feature.category.phrase.verb")):JSrealB.Config.get("language")===JSrealE.language.french?new VP_FR(arguments):new VP_EN(arguments)};extend(JSrealE,VP),VP.prototype.sortWord=function(){for(var e=0,t=this.elements.length;e<t;e++){var r=this.elements[e];switch(r.category){case JSrealB.Config.get("feature.category.word.verb"):this.addConstituent(r,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.word.adjective"):this.addConstituent(r,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(r,JSrealE.grammaticalFunction.complement)}}return this};var VP_FR=function(e){VP.call(this,e)};extend(VP,VP_FR);var VP_EN=function(e){VP.call(this,e)};extend(VP,VP_EN);var NP=function(e){return this instanceof NP?void JSrealE.call(this,e,JSrealB.Config.get("feature.category.phrase.noun")):JSrealB.Config.get("language")===JSrealE.language.french?new NP_FR(arguments):new NP_EN(arguments)};extend(JSrealE,NP),NP.prototype.sortWord=function(){};var NP_FR=function(e){NP.call(this,e)};extend(NP,NP_FR),NP_FR.prototype.sortWord=function(){for(var e=0,t=this.elements.length;e<t;e++){var r=this.elements[e];switch(r.category){case JSrealB.Config.get("feature.numerical.alias"):this.addConstituent(r,JSrealE.grammaticalFunction.modifier);break;case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.word.noun"):case JSrealB.Config.get("feature.category.word.pronoun"):case JSrealB.Config.get("feature.category.phrase.coordinated"):void 0===this.constituents.head?this.addConstituent(r,JSrealE.grammaticalFunction.head):this.addConstituent(r,JSrealE.grammaticalFunction.complement);break;case JSrealB.Config.get("feature.category.word.determiner"):case JSrealB.Config.get("feature.category.word.adverb"):case JSrealB.Config.get("feature.category.phrase.adverb"):case JSrealB.Config.get("feature.category.word.adjective"):case JSrealB.Config.get("feature.category.phrase.adjective"):this.addConstituent(r,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(r,JSrealE.grammaticalFunction.complement)}}return this};var NP_EN=function(e){NP.call(this,e)};extend(NP,NP_EN),NP_EN.prototype.sortWord=function(){for(var e=0,t=this.elements.length;e<t;e++){var r=this.elements[e];switch(r.category){case JSrealB.Config.get("feature.numerical.alias"):this.addConstituent(r,JSrealE.grammaticalFunction.modifier);break;case JSrealB.Config.get("feature.category.word.noun"):case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.word.pronoun"):case JSrealB.Config.get("feature.category.phrase.coordinated"):this.addConstituent(r,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.word.determiner"):this.addConstituent(r,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(r,JSrealE.grammaticalFunction.complement)}}return this};var AP=function(e){return this instanceof AP?void JSrealE.call(this,e,JSrealB.Config.get("feature.category.phrase.adjective")):JSrealB.Config.get("language")===JSrealE.language.french?new AP_FR(arguments):new AP_EN(arguments)};extend(JSrealE,AP),AP.prototype.sortWord=function(){for(var e=0,t=this.elements.length;e<t;e++){var r=this.elements[e];switch(r.category){case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.word.adjective"):this.addConstituent(r,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.word.adverb"):case JSrealB.Config.get("feature.category.phrase.adverb"):case JSrealB.Config.get("feature.category.word.preposition"):case JSrealB.Config.get("feature.category.phrase.prepositional"):case JSrealB.Config.get("feature.category.phrase.propositional"):default:this.addConstituent(r,JSrealE.grammaticalFunction.complement)}}return this};var AP_FR=function(e){AP.call(this,e)};extend(AP,AP_FR);var AP_EN=function(e){AP.call(this,e)};extend(AP,AP_EN);var AdvP=function(e){return this instanceof AdvP?void JSrealE.call(this,e,JSrealB.Config.get("feature.category.phrase.adverb")):JSrealB.Config.get("language")===JSrealE.language.french?new AdvP_FR(arguments):new AdvP_EN(arguments)};extend(JSrealE,AdvP),AdvP.prototype.sortWord=function(){};var AdvP_FR=function(e){AdvP.call(this,e)};extend(AdvP,AdvP_FR),AdvP_FR.prototype.sortWord=function(){for(var e=0,t=this.elements.length;e<t;e++){var r=this.elements[e];switch(r.category){case JSrealB.Config.get("feature.category.phrase.adverb"):case JSrealB.Config.get("feature.category.word.adverb"):this.addConstituent(r,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.word.preposition"):case JSrealB.Config.get("feature.category.phrase.prepositional"):case JSrealB.Config.get("feature.category.phrase.propositional"):default:this.addConstituent(r,JSrealE.grammaticalFunction.complement)}}return this};var AdvP_EN=function(e){AdvP.call(this,e)};extend(AdvP,AdvP_EN),AdvP_EN.prototype.sortWord=function(){for(var e=0,t=this.elements.length;e<t;e++){var r=this.elements[e];switch(r.category){case JSrealB.Config.get("feature.category.word.adverb"):this.addConstituent(r,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.phrase.adverb"):case JSrealB.Config.get("feature.category.word.preposition"):case JSrealB.Config.get("feature.category.phrase.prepositional"):case JSrealB.Config.get("feature.category.phrase.propositional"):default:this.addConstituent(r,JSrealE.grammaticalFunction.complement)}}return this};var PP=function(e){return this instanceof PP?void JSrealE.call(this,e,JSrealB.Config.get("feature.category.phrase.prepositional")):JSrealB.Config.get("language")===JSrealE.language.french?new PP_FR(arguments):new PP_EN(arguments)};extend(JSrealE,PP),PP.prototype.sortWord=function(){for(var e=0,t=this.elements.length;e<t;e++){var r=this.elements[e];switch(r.category){case JSrealB.Config.get("feature.category.word.preposition"):this.addConstituent(r,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.word.verb"):case JSrealB.Config.get("feature.category.phrase.verb"):default:this.addConstituent(r,JSrealE.grammaticalFunction.complement)}}return this};var PP_FR=function(e){PP.call(this,e)};extend(PP,PP_FR);var PP_EN=function(e){PP.call(this,e)};extend(PP,PP_EN);var SP=function(e){return this instanceof SP?void JSrealE.call(this,e,JSrealB.Config.get("feature.category.phrase.propositional")):JSrealB.Config.get("language")===JSrealE.language.french?new SP_FR(arguments):new SP_EN(arguments)};extend(JSrealE,SP),SP.prototype.sortWord=function(){this.constituents.head=null;for(var e=0,t=this.elements.length;e<t;e++){var r=this.elements[e];switch(r.category){case JSrealB.Config.get("feature.category.phrase.sentence"):case JSrealB.Config.get("feature.category.phrase.verb"):this.addConstituent(r,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.phrase.coordinated"):if(null===this.constituents.head){this.addConstituent(r,JSrealE.grammaticalFunction.modifier);break}case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.phrase.adverb"):this.addConstituent(r,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(r,JSrealE.grammaticalFunction.complement)}}return this};var SP_FR=function(e){SP.call(this,e)};extend(SP,SP_FR);var SP_EN=function(e){SP.call(this,e)};extend(SP,SP_EN);var DT=function(e){return this instanceof DT?void JSrealE.call(this,e,JSrealB.Config.get("feature.date.alias"),JSrealE.ruleType.date):new DT(e)};extend(JSrealE,DT);var NO=function(e){return this instanceof NO?void JSrealE.call(this,e,JSrealB.Config.get("feature.numerical.alias"),JSrealE.ruleType.number):new NO(e)};extend(JSrealE,NO);var JSrealB=function(){return{init:function(e,t,r,n){this.Config.set({language:e,lexicon:t,rule:r,feature:n,isDevEnv:!0,printTrace:!1})}}}();JSrealB.Module={},JSrealB.Module.Punctuation=function(){var e={start:1,end:2},t=function(t,a,o){var i="";if(a===e.start){i=ltrim(t);var l="",u=i;do l=i.charAt(0),r(l)&&void 0===o[JSrealB.Config.get("feature.typography.complementary")]&&void 0===n(l)[JSrealB.Config.get("feature.typography.complementary")]&&(i=i.substring(1)),u=i;while(u!==i);i=ltrim(i)}else if(a===e.end){i=rtrim(t);var s="",u=i;do s=i.charAt(i.length-1),r(s)&&void 0===o[JSrealB.Config.get("feature.typography.complementary")]&&void 0===n(s)[JSrealB.Config.get("feature.typography.complementary")]&&(i=i.substring(0,i.length-1)),u=i;while(u!==i);i=rtrim(i)}return i},r=function(e){return"undefined"!=typeof JSrealB.Config.get("lexicon")[e]&&"undefined"!=typeof JSrealB.Config.get("lexicon")[e][JSrealB.Config.get("feature.category.word.punctuation")]},n=function(e){var t=null;if(!r(e))throw JSrealB.Exception.wrongPunctuation(e);return t=JSrealB.Config.get("lexicon")[e][JSrealB.Config.get("feature.category.word.punctuation")]},a=function(e){var t=JSrealB.Config.get("rule").punctuation[e];if(void 0===t)throw JSrealB.Exception.tableNotExists("unknown",e);return t},o=function(r,o){var i=n(o),l=a(i.tab[0]);return l[JSrealB.Config.get("feature.typography.before")]+o+l[JSrealB.Config.get("feature.typography.after")]+t(r,e.start,i)},i=function(r,o){var i=n(o),l=a(i.tab[0]);return t(r,e.end,i)+l[JSrealB.Config.get("feature.typography.before")]+o+l[JSrealB.Config.get("feature.typography.after")];
},l=function(e,t){var r=e,l=n(t);if(l.tab.length>1){var u=null,s=a(l.tab[0]),g=a(l.tab[1]);s[JSrealB.Config.get("feature.typography.position.alias")]!==JSrealB.Config.get("feature.typography.position.left")&&(u=s,s=g,g=u),r=trim(r),r=s[JSrealB.Config.get("feature.typography.before")]+t+s[JSrealB.Config.get("feature.typography.after")]+r+g[JSrealB.Config.get("feature.typography.before")]+t+g[JSrealB.Config.get("feature.typography.after")]}else{if(void 0===l[JSrealB.Config.get("feature.typography.complementary")])throw JSrealB.Exception.pcMarkNotSupported(t);var f=l[JSrealB.Config.get("feature.typography.complementary")],c=a(l.tab[0]),p=t,d=f;c[JSrealB.Config.get("feature.typography.position.alias")]!==JSrealB.Config.get("feature.typography.position.left")&&(p=f,d=t);var h=o(trim(r),p),S=i(h,d);trim(r)!==trim(h)&&trim(h)!==S&&(r=trim(r),r=S)}return r};return{before:function(e,t){try{return o(e,t)}catch(t){return"[["+e+"]]"}},after:function(e,t){try{return i(e,t)}catch(t){return"[["+e+"]]"}},surround:function(e,t){try{return l(e,t)}catch(t){return"[["+e+"]]"}},isValid:function(e){return r(e)}}}(),JSrealB.Module.Declension=function(){var e=function(e,t,r){var n=getValueByFeature(r.declension,t);return null!==n&&stem(e,r.ending)+n},t=function(t,r,n){var a=JSrealB.Module.Common.getWordFeature(t,r);void 0===n&&(n={});for(var o=[],i=0,l=a.tab.length;i<l;i++)o[i]=JSrealB.Config.get("rule").declension[a.tab[i]];if(void 0!==n[JSrealB.Config.get("feature.gender.alias")]&&void 0!==a[JSrealB.Config.get("feature.gender.alias")]&&a[JSrealB.Config.get("feature.gender.alias")]===JSrealB.Config.get("feature.gender.either")&&(n[JSrealB.Config.get("feature.gender.alias")]=JSrealB.Config.get("feature.gender.masculine")),o.length>0){var u=!1,s=0;do u=e(t,n,o[s]),s++;while(u===!1&&s<o.length);if(u===!1)throw JSrealB.Exception.wrongDeclension(t,r,JSON.stringify(n));return u}throw JSrealB.Exception.tableNotExists(t,a.tab)};return{decline:function(e,r,n){var a=null;try{a=t(e,r,n)}catch(t){return"[["+e+"]]"}return a}}}(),JSrealB.Module.Conjugation=function(){var e=function(e,t,r,n){if(void 0!==n[JSrealB.Config.get("feature.tense.alias")][t]){if(null===r||"string"==typeof n.t[t])return stem(e,n.ending)+n.t[t];if(void 0!==n.t[t][r-1]&&null!==n.t[t][r-1])return stem(e,n.ending)+n.t[t][r-1];throw JSrealB.Exception.wrongPerson(e,r)}throw JSrealB.Exception.wrongTense(e,t)},t=function(t,r,n){var a=JSrealB.Module.Common.getWordFeature(t,JSrealB.Config.get("feature.category.word.verb")),o=JSrealB.Config.get("rule").conjugation[a.tab];if(void 0!==o)return e(t,r,n,o);throw JSrealB.Exception.tableNotExists(t,a.tab)};return{conjugate:function(e,r,n){var a=null;try{a=t(e,r,n)}catch(t){return"[["+e+"]]"}return a}}}(),JSrealB.Module.RegularRule=function(){var e=function(e,t,r){var n=getValueByFeature(r.option,t);return null!==n&&stem(e,r.ending)+n},t=function(t,r,n){var a=JSrealB.Module.Common.getWordFeature(t,r),o=[];for(var i in a.tab)o[i]=JSrealB.Config.get("rule").regular[a.tab[i]];if(o.length>0){var l=!1,u=0;do l=e(t,n,o[u]),u++;while(l===!1&&u<o.length);if(l===!1)throw JSrealB.Exception.wrongRule(t,JSON.stringify(n));return l}throw JSrealB.Exception.tableNotExists(t,a.tab)};return{apply:function(e,r,n){var a=null;try{var o=void 0===n?{}:n;a=t(e,r,o)}catch(t){return"[["+e+"]]"}return a}}}(),JSrealB.Module.Common=function(){var e=function(e,t,r){var n=JSrealB.Config.get("lexicon")[e];if(void 0!==n){if(void 0!==n[t])return n[t];if(void 0===r||r===!1)throw JSrealB.Exception.wordNotExists(e,t);return null}if(void 0===r||r===!1)throw JSrealB.Exception.wordNotExists(e);return null};return{getWordFeature:function(t,r,n){return e(t,r,n)}}}(),JSrealB.Module.Date=function(){var year,month,date,day,hour,minute,second,customValue,getYear=function(){return year},getMonth=function(){return month},getDate=function(){return date},getDay=function(){return day},getHour=function(){return hour},getMinute=function(){return minute},getSecond=function(){return second},getCustomValue=function(){return customValue},applyTextualDateRule=function(e,t){if(isNumeric(e)){var r=JSrealB.Config.get("rule").date.text[t];if(void 0!==r&&void 0!==r[e])return r[e];throw JSrealB.Exception.wrongDate(t)}},numberToMonth=function(e){try{return applyTextualDateRule(e,"month")}catch(t){return"[["+e+"]]"}},numberToDay=function(e){try{return applyTextualDateRule(e,"weekday")}catch(t){return"[["+e+"]]"}},numberWithLeadingZero=function(e){if(isNumeric(e)){var t=getInt(e).toString();return t.length<2&&(t="0"+t),t.toString()}return"[["+e+"]]"},numberWithoutLeadingZero=function(e){return isNumeric(e)?getInt(e).toString():"[["+e+"]]"},numberToMeridiem=function(e){return applyTextualDateRule(getInt(e)<12?0:1,"meridiem")},numberTo12hour=function(e){return isNumeric(e)?numberWithLeadingZero(getInt(e)>=12?getInt(e)-12:e):"[["+e+"]]"},doNothing=function(e){return e},format={Y:{param:getYear,func:numberWithoutLeadingZero},F:{param:getMonth,func:numberToMonth},m:{param:getMonth,func:numberWithLeadingZero},d:{param:getDate,func:numberWithLeadingZero},j:{param:getDate,func:numberWithoutLeadingZero},l:{param:getDay,func:numberToDay},A:{param:getHour,func:numberToMeridiem},h:{param:getHour,func:numberTo12hour},H:{param:getHour,func:numberWithLeadingZero},i:{param:getMinute,func:numberWithLeadingZero},s:{param:getSecond,func:numberWithLeadingZero},x:{param:getCustomValue,func:doNothing}},getPatternKey=function(elementDisplayed,allElementList,separator){for(var key="",i=0,length=allElementList.length;i<length;i++)"second"===allElementList[i]&&0===getInt(eval(allElementList[i]))||(key+=void 0!==elementDisplayed&&void 0!==elementDisplayed[allElementList[i]]&&elementDisplayed[allElementList[i]]===!1?"":allElementList[i]+separator);return key=trim(key),key.length>0?key.substring(0,key.length-1):null},singlePatternRealization=function(e){return void 0!==format[e]?format[e].func(format[e].param()):"[["+e+"]]"},patternRealization=function(e){for(var t,r="",n=null,a=0,o=e.length;a<o;a++)t=e.charAt(a),"["===t?n="":"]"===t?(r+=singlePatternRealization(n),n=null):null!==n?n+=t:r+=t;return r},setFullDate=function(e){year=e.getFullYear(),month=e.getMonth()+1,date=e.getDate(),day=e.getDay(),hour=e.getHours(),minute=e.getMinutes(),second=e.getSeconds()},removeDeterminer=function(e,t){var r=e;if(void 0!==t&&t===!1){var n=r.indexOf("[");n>=0&&(r=r.substring(n))}return r},dateRealization=function(e,t,r,n,a){var o="";if(null!==r&&void 0!==t[r]){var i=removeDeterminer(t[r],a);o=patternRealization(i)}var l="";if(null!==n&&void 0!==t[n]){var u=removeDeterminer(t[n],a);l=patternRealization(u)}return trim(o+" "+l)},toWord=function(e,t){setFullDate(e);var r=getPatternKey(t,["year","month","date","day"],"-"),n=getPatternKey(t,["hour","minute","second"],":"),a=JSrealB.Config.get("rule").date.format.natural;return dateRealization(e,a,r,n,void 0!==t?t.det:void 0)},formatter=function(e,t){setFullDate(e);var r=getPatternKey(t,["year","month","date","day"],"-"),n=getPatternKey(t,["hour","minute","second"],":"),a=JSrealB.Config.get("rule").date.format.non_natural;return dateRealization(e,a,r,n)},realDayDiff=function(e,t){var r=e.getTime()-t.getTime(),n=r/864e5;return getFloat(n)},relativeDayDiff=function(e,t){var r=new Date,n=getInt(Math.ceil(realDayDiff(e,t)));return r.setDate(r.getDate()+n),r.getDate()!==e.getDate()&&n--,n},toRelativeTime=function(e,t){setFullDate(e);var r=new Date,n=relativeDayDiff(e,r),a=JSrealB.Config.get("rule").date.format.relative_time;return void 0===a[n]&&(customValue=Math.abs(n),n=n<0?"-":"+"),dateRealization(e,a,n.toString(),null)};return{toWord:function(e,t){return toWord(e,t)},formatter:function(e,t){return formatter(e,t)},toRelativeTime:function(e,t){return toRelativeTime(e,t)}}}(),JSrealB.Module.Number=function(){var e=function(e,t,r){throw"TODO"},t=function(e,t,r,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,i="undefined"==typeof n?"":n,l="undefined"==typeof r?".":r,u="",s=function(e,t){var r=Math.pow(10,t);return""+(Math.round(e*r)/r).toFixed(t)};return u=(o?s(a,o):""+Math.round(a)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(u[1]||"").length<o&&(u[1]=u[1]||"",u[1]+=new Array(o-u[1].length+1).join("0")),u.join(l)},r=function(e,r,a){var o=void 0===r?2:r,i=JSrealB.Config.get("rule").number;o=nbDecimal(e)>o?o:nbDecimal(e);var l=t(e,o,i.symbol.decimal,i.symbol.group);return void 0!==a&&a(n(t(e,o,".",""))),l},n=function(e){var t=getInt(e);return t>=-1&&t<=1?JSrealB.Config.get("feature.number.singular"):JSrealB.Config.get("feature.number.plural")},a=function(e){return void 0!==e&&isNumeric(e)};return{formatter:function(e,t,n){var o=null;try{if(!a(e))throw JSrealB.Exception.wrongNumber(e);return o=r(e,t,n)}catch(t){return"[["+e+"]]"}},toWord:function(t,r,n){var o=null;try{if(!a(t))throw JSrealB.Exception.wrongNumber(t);return o=e(t,r,n)}catch(e){return"[["+t+"]]"}},getGrammaticalNumber:function(e){var t=null;try{if(!a(e))throw JSrealB.Exception.wrongNumber(e);return t=n(e)}catch(t){return"[["+e+"]]"}},getNumberFormat:function(e,r,n,a){return t(e,r,n,a)}}}();var isString=function(e){return"string"==typeof e},isNumeric=function(e){return!isNaN(getFloat(e))&&isFinite(e)},nbDecimal=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},isBoolean=function(e){return e===!0||e===!1},isObject=function(e){return"object"==typeof e&&!Array.isArray(e)},getInt=function(e){return parseInt(e,10)},getFloat=function(e){return parseFloat(e,10)},intVal=function(e){var t=e.split(" ").join("").match(/-?\d+/),r=null!==t?getInt(t[0]):null;return r},ltrim=function(e){return e.replace(/^\s+/,"")},rtrim=function(e){return e.replace(/\s+$/,"")},trim=function(e){return e.replace(/^\s+|\s+$/g,"")},stem=function(e,t){if(t.length>0){var r=e.length-t.length;if(r<0||e.substring(r)!==t)throw JSrealB.Exception.wrongEnding(e,t);return e.substring(0,r)}return e},inArray=function(e,t){return void 0!==t&&e.indexOf(t)>=0},contains=function(e,t){if(Array.isArray(e))return inArray(e,t);if(isObject(e)){var r=typeof t,n=!1;for(var a in e)if(typeof e[a]===r){if(e[a]===t){n=!0;break}}else if(n=contains(e[a],t))break;return n}return e===t},stripLeftHtml=function(e){return e.replace(/^<([^>]+)>/i,"")},fetchFromObject=function(e,t,r){if(void 0!==e){var n=t.indexOf(".");return n>-1?fetchFromObject(e[t.substring(0,n)],t.substr(n+1),r):void 0!==r?e[t]=r:e[t]}},getValueByFeature=function(e,t){for(var r=null,n=0,a=Object.keys(e).length,o=0,i={},l=0,u=0,s=0,g=0,f=0,c=null,p=0,d=0,h=1e3,S=null;n<a&&null===r;){for(o=0,s=0,g=0,f=0,l=Object.keys(e[n]).length,i=Object.keys(t),u=i.length;o<u;)!e[n].hasOwnProperty(i[o])||e[n][i[o]]!==t[i[o]]&&"x"!==e[n][i[o]]||null===t[i[o]]?e[n].hasOwnProperty(i[o])?g++:f++:s++,o++;s>=l-1&&s>p?(c=e[n],p=s,h=f):s>=l-1&&s===p&&g<d?(c=e[n],d=g,h=f):s>0&&0===g&&s>p&&f<=h&&(c=e[n],d=g,h=f),s===u||1===a&&0===g?r=e[n].val:1===l&&0===g&&(S=e[n].val),n++}return null!==r?r:null!==c?c.val:S};JSrealB.Request=function(){var e=function(e,t){var r=new XMLHttpRequest;return r.overrideMimeType&&r.overrideMimeType("application/json"),"withCredentials"in r?r.open(e,t,!0):"undefined"!=typeof XDomainRequest?(r=new XDomainRequest,r.open(e,t)):r=null,r},t=function(t,r,n){var a=e("GET",t);return a?(a.onreadystatechange=function(){4===a.readyState&&(200===a.status||0===a.status?r(a.responseText):n&&n(a.status,a.statusText))},void a.send(null)):void JSrealB.Logger.alert("HTTP Get Request not supported")};return{getJson:function(e,r,n){return"undefined"==typeof e?void n(610,"Incorrect url: "+e):void t(e,function(t){try{var a=JSON.parse(t);r(a)}catch(t){n(611,"JSON parsing error: "+t+" with "+e)}},n)}}}(),JSrealB.Config=function(){var e={language:JSrealE.language.english,isDevEnv:!1,printTrace:!1,lexicon:{},rule:{},feature:{}};return{add:function(t){var r={};for(var n in t)void 0===e[n]&&(e[n]=t[n],r[n]=e[n]);return r},set:function(t){var r={};for(var n in t)void 0!==e[n]&&(e[n]=t[n],r[n]=e[n]);return r},get:function(t){var r=fetchFromObject(e,t);return void 0!==r?r:(JSrealB.Logger.warning(t+" is not defined!"),null)}}}(),JSrealB.Exception=function(){var e={exception:{4501:{en:"doesn't exist in lexicon",fr:"n'est pas présent dans le lexique"},4502:{en:"isn't a valid number",fr:"n'est pas un nombre bien formé"},4503:{en:"has no rule with table id",fr:"n'a pas de règle avec l'id"},4504:{en:"has no ending",fr:"n'a pas la terminaison"},4505:{en:"doesn't conjugate in",fr:"ne se conjugue pas au"},4506:{en:"doesn't use this person or person doesn't exist, person =",fr:"n'utilise pas cette personne ou cette personne n'existe pas, person ="},4507:{en:"isn't a valid date, wrong format",fr:"n'est pas une date dans un format valide"},4508:{en:"doesn't decline with these properties, for category ",fr:"ne se décline pas avec ces propriétés, pour la catégorie"},4509:{en:"isn't a punctuation mark",fr:"n'est pas un signe de ponctuation"},4510:{en:"is not supported",fr:"n'est pas supporté"},4512:{en:"doesn't know rule with properties",fr:"ne connait pas de règle avec les propriétés"},4513:{en:"isn't a valid value for",fr:"n'est pas une valeur valide pour"},4514:{en:"has no headword",fr:"n'a pas de noeud"}}},t=function(t,r,n,a){var o=r+" "+e.exception[t][JSrealB.Config.get("language")];return void 0!==n&&(o+=" "+n),void 0!==a&&(o+=", "+a),JSrealB.Logger.warning(o),o};return{wordNotExists:function(e){return t(4501,e)},wrongNumber:function(e){return t(4502,e)},wrongDate:function(e){return t(4507,e)},tableNotExists:function(e,r){return t(4503,e,r)},wrongEnding:function(e,r){return t(4504,e,r)},wrongTense:function(e,r){return t(4505,e,r)},wrongDeclension:function(e,r,n){return t(4508,e,r,n)},wrongRule:function(e,r){return t(4512,e,r)},wrongPerson:function(e,r){return t(4506,e,r)},wrongPunctuation:function(e){return t(4509,e)},pcMarkNotSupported:function(e){return t(4510,e)},invalidInput:function(e){return t(4513,e)},headWordNotFound:function(e){return t(4514,e)}}}(),JSrealB.Logger=function(){var e=function(e){JSrealB.Config.get("isDevEnv")&&console.log("%cDebug: "+e,"background: #CEE3F6; color: black")},t=function(e){console.log(e)},r=function(e){console.warn(e),JSrealB.Config.get("printTrace")&&console.trace()},n=function(e){console.error(e),JSrealB.Config.get("printTrace")&&console.trace()};return{print:function(e){print(e)},debug:function(t){e(t)},info:function(e){t(e)},warning:function(e){r(e)},alert:function(e){n(e)}}}();var JSrealBResource={en:{},fr:{},common:{}},JSrealLoader=function(e,t,r){var n=e.language;if(void 0===n||Object.keys(JSrealBResource).indexOf(n)<0)return void r("Undefined or wrong language");if("undefined"!=typeof JSrealBResource[n].lexicon&&"undefined"!=typeof JSrealBResource[n].rule&&"undefined"!=typeof JSrealBResource.common.feature)return JSrealB.init(n,JSrealBResource[n].lexicon,JSrealBResource[n].rule,JSrealBResource.common.feature),void t();var a=e.lexiconUrl,o=e.ruleUrl,i=e.featureUrl;JSrealB.Request.getJson(a,function(e){JSrealBResource[n].lexicon=e,JSrealB.Request.getJson(o,function(a){JSrealBResource[n].rule=a,"undefined"!=typeof JSrealBResource.common.feature?(JSrealB.init(n,e,a,JSrealBResource.common.feature),t()):JSrealB.Request.getJson(i,function(r){JSrealBResource.common.feature=r,JSrealB.init(n,e,a,r),t()},function(e,t){JSrealB.Logger.alert("Dictionary loading : "+e+" : "+t),r&&r(t)})},function(e,t){JSrealB.Logger.alert("Rule loading : "+e+" : "+t),r&&r(t)})},function(e,t){JSrealB.Logger.alert("Lexicon loading : "+e+" : "+t),r&&r(t)})};
function htmlEncode(t){return t?$("<div />").text(t).html():""}function htmlDecode(t){return t?$("<div />").html(t).text():""}String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.capitalize=function(){return this.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})};